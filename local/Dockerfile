FROM python:3.11-slim-bookworm

RUN useradd -m dev

WORKDIR /app

USER dev

COPY requirements.txt .
COPY ts-file.py .

RUN --mount=type=cache,target=/root/.cache/pip \
    pip install --no-cache-dir -r requirements.txt

ENV AWS_ACCESS_KEY_ID="ASIAV7HSKFRHWHVJNTW4"
ENV AWS_SECRET_ACCESS_KEY="LvmmLrh30arm2UG8UZcvqw62wXs9teemusZuZZi0"
ENV AWS_SESSION_TOKEN="IQoJb3JpZ2luX2VjEGwaCXVzLWVhc3QtMSJGMEQCIAR5WF84E+Pi6I7W2Gi7COIz21/AfYkyYiy8oizb1BLwAiALBjyV6tyHOqjI2BIiL76tiUQ/bIfJm2Mw2UrS2KP4mSqTAwg0EAEaDDQxMDY3NzU1NDI1NSIMIMd61NOBV8KJYKhoKvACYsqaxwlf2nVxViQfefbF5Ruy/skpzb1c2a5Y+VnQzIiJP0Z+Wj2Q3HMdyWc7kk2o835w6fXdE77AtTuQ2axB4qC9M+557VNt0xqkEwmaMCh5H3eUla3iAL9kaGqaP0mzCiDEgfu4GW67avfhKvtbqsBTK2iBJAJbk82CaBNPBuKd+9jSvp6knc56EMUQRz5b1YswnN6Bj/mJwk9brm4LY2Xvk3566a9/Sb6z5N22Bako1CK5aCALtwPQPsJ0q+9XrGbmlI0qMtJq3fpPEfYUnMRL2k3gTvSfqZZYRZDO5SrnDfsXlxWMf9OIQHBj4nOgKDaYa/3U1OVTRVinIw9lS5NAm8NJjka42jAB6pUvRRVw0Gp5eO3ux2Kk+wQfnGI/Zpehc7LnuSUxkFuMg0E4TAmlhpQKxjZYFGYgDbSCedJ0sFtnfYTgewhPkeLk9B3fqoWUwQT3rfpTqW8Da6QiLB3fs1gO04uMDUP/FkWYxCAwnbrqrQY6pwEBTRUyYah3xeeJ5hgtRrWOVNKKVuXxzILj0o1//tezi7OBqrJoyF8ZxPZjlFKTvvWZRqM41Z29IxWx6DepmxaLA1z8gpfB1/n64jIEe7p69OoLcYm3vOyOK6RhX/AHUBBkr3rtgrEI9s+8eMRqZk3/k85XE2RphDJowj52nqn4LHARehoM7H5wB0XHVKGYFqi7tof09V03UKvHeY8qJTUzC0nNme+uZA=="

CMD ["python", "simple-file.py"]